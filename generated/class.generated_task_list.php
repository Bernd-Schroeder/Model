<?php

/**
 * This php file is automatically generated by Skolenet
 * Model - Class: task
 */

if (0 > version_compare(PHP_VERSION, '5'))
{ die('This file was generated for PHP 5'); }


require_once('class.basic_list.php');


class generated_task_list
     extends basic_list
{

    /**
     *
     * This attribute hold the handle to the Mysqli statement task
     * @author Bernd Schröder
     *
     * @access protected
     * @var Integer
     */
    protected $stmt = null;
    

    /**
     *
     * This is the list_load function of the class task
     * @author Bernd Schröder
     *
     */
    public function list_load( $where_statement )
    {
      $prepare_statement = 
      "SELECT
      id,
      author_id,
      receiver_id,
      team_id,
      est_duration,
      real_duration,
      status,
      task_description,
      author_comment,
      author_media_id,
      receiver_comment,
      receiver_media_id,
      start_time_table_item_id,
      end_time_table_item_id,
      end_item_date
      FROM task " .
      $where_statement;
      return $this->basic_load( $prepare_statement );
    }

    /**
     *
     * This is the basic_count function of the class task
     * @author Bernd Schröder
     *
     */
    public function basic_count( $prepare_statement )
    {
      require "data_connect.php";

      $object_number = 0;
      if( $this->stmt = $mysqli->prepare( $prepare_statement ))
      {
      $this->set_binding();
      $this->stmt->execute();
      $this->stmt->store_result();
      $object_number = $this->stmt->num_rows;
      $this->stmt->close();
      }
      $mysqli->close();
      return $object_number;
    }

    /**
     *
     * This is the basic_load function of the class task
     * @author Bernd Schröder
     *
     */
    public function basic_load( $prepare_statement )
    {
      if( defined('__GEN_ROOT__') == FALSE )
      { define('__GEN_ROOT__', dirname(dirname(__FILE__))); }
      require_once(__GEN_ROOT__.'/class.task.php');

      require "data_connect.php";

      $object_number = 0;
      $max_row = $this->get_row_per_page();
      $page = $this->get_page();
      $start_row = $page*$max_row;
      if( $this->stmt = $mysqli->prepare( $prepare_statement ))
      {
      $this->set_binding();
      $this->stmt->execute();
      $this->stmt->bind_result
      (
      $id,
      $author_id,
      $receiver_id,
      $team_id,
      $est_duration,
      $real_duration,
      $status,
      $task_description,
      $author_comment,
      $author_media_id,
      $receiver_comment,
      $receiver_media_id,
      $start_time_table_item_id,
      $end_time_table_item_id,
      $end_item_date
      );
      $this->stmt->store_result();
      $this->stmt->data_seek( (int)( $start_row ) );
      while( $this->stmt->fetch()  
      AND ( $object_number < $max_row ) )
      {
      $new_object = new task();
      $new_object->set_id( $id );
      $new_object->set_author_id( $author_id );
      $new_object->set_receiver_id( $receiver_id );
      $new_object->set_team_id( $team_id );
      $new_object->set_est_duration( $est_duration );
      $new_object->set_real_duration( $real_duration );
      $new_object->set_status( $status );
      $new_object->set_task_description( $task_description );
      $new_object->set_author_comment( $author_comment );
      $new_object->set_author_media_id( $author_media_id );
      $new_object->set_receiver_comment( $receiver_comment );
      $new_object->set_receiver_media_id( $receiver_media_id );
      $new_object->set_start_time_table_item_id( $start_time_table_item_id );
      $new_object->set_end_time_table_item_id( $end_time_table_item_id );
      $new_object->set_end_item_date( $end_item_date );
      $this->add_item( $new_object );
      $object_number++;
      }
      $this->stmt->close();
      }
      $mysqli->close();
      return $object_number;
    }

    /**
     *
     * This is the prepare_list function of the class task
     * @author Bernd Schröder
     *
     */
    public function get_prepare_list()
    {
      return 
      "
      task.id,
      task.author_id,
      task.receiver_id,
      task.team_id,
      task.est_duration,
      task.real_duration,
      task.status,
      task.task_description,
      task.author_comment,
      task.author_media_id,
      task.receiver_comment,
      task.receiver_media_id,
      task.start_time_table_item_id,
      task.end_time_table_item_id,
      task.end_item_date
      ";
    }

    /**
     *
     * This is the set_binding function of the class task
     * @author Bernd Schröder
     *
     */
    public function set_binding()
    {
      ;
    }

} /* end of class task */
?>